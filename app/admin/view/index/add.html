<!DOCTYPE html>
<html>

<head>
    <title>出库记录·库存管理系统</title>
    <style>

    </style>
    {include file="common/header"/}
    <el-main>
        <el-row>
            <el-col :span="8"><div class="grid-content bg-purple">产品编号：{{ StockOutID }}</div></el-col>
            <el-col :span="8"><div class="grid-content bg-purple-light">评审单号：{{ AppraisalID }}</div></el-col>
            <el-col :span="8"><div class="grid-content bg-purple-light">剩余需求数量：{{ Quantity }}</div></el-col>
        </el-row>
    </el-main>


    {include file="common/footer"/}
    <script>
        new Vue({
            el: '#app',
            data:{
                form:{

                },
                material:{

                },
                StockOutID:'',
                AppraisalID:'',
                Quantity:'',
            },
            mounted () {
                this.abc();
            },

            methods: {
                logOut() {
                    var that = this;
                    axios.post('user/logout')
                        .then(function (response)
                        {
                            if (response.data.code == 200) {
                                that.$message({
                                    message: '退出成功,正在跳转中',
                                    type: 'success'
                                });
                                setTimeout(function () {
                                    location.replace('');
                                }, 1000)
                            } else {
                                that.$message.error(response.data.msg);
                            }
                        })
                        .catch(function (error)
                        {
                            that.$message.error('tuichu失败，服务器内部错误');
                        })

                },

                abc(){
                    var that = this;
                    that.StockOutID = getCookie('StockOutID');
                    that.AppraisalID = getCookie('AppraisalID');
                    that.Quantity = getCookie('LeftQuantity');
                    axios.post('manage/confirmmaterial')
                        .then(function (response)
                        {
                            that.material = response.data.data;
                        })

                },

                postAdd(){
                    var that = this;
                    axios.post('manage/addpurchase', Object.assign({}, PostBase, that.formAdd))
                        .then(function (response) {
                            if (response.data.code == CODE_SUCCESS) {
                                that.$message({
                                    message: response.data.msg,
                                    type: 'success'
                                });
                                that.dialogFormAdd = false;
                                setTimeout(function () {
                                    location.replace('');
                                }, 1000)
                            } else {
                                that.$message.error(response.data.msg);
                            }
                        })
                        .catch(function (error) {
                            that.$message.error('服务器内部错误');
                            console.log(error);
                        });
                },

            }
        })
    </script>

</html>